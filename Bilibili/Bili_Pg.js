const version = 'V2.0.97';

let body=$response.body;
if(body){switch(!0){
case/^https?:\/\/app\.(bilibili|biliapi)\.(com|net)\/x\/resource\/show\/tab/.test($request.url):try{let p=new Set([177,178,179,181,102,104,106,486,488,489]),c=JSON.parse(body);if(c.data?.tab&&(c.data.tab=[{id:39,name:"直播",uri:"bilibili://live/home",tab_id:"直播tab",pos:1},{id:40,name:"推荐",uri:"bilibili://pegasus/promo",tab_id:"推荐tab",pos:2,default_selected:1},{id:41,name:"热门",uri:"bilibili://pegasus/hottopic",tab_id:"hottopic",pos:3},{id:545,name:"番剧",uri:"bilibili://pgc/home",tab_id:"bangumi",pos:4},{id:151,name:"影视",uri:"bilibili://pgc/cinema-tab",tab_id:"film",pos:5}]),c.data.top&&(c.data.top=[{id:481,icon:"http://i0.hdslb.com/bfs/archive/d43047538e72c9ed8fd8e4e34415fbe3a4f632cb.png",name:"消息",uri:"bilibili://link/im_home",tab_id:"消息Top",pos:1}]),c.data.bottom){let n=c.data.bottom.filter(t=>p.has(t.id));c.data.bottom=n}body=JSON.stringify(c)}catch(y){console.log("bilibili tab processing:"+y)}break;
case/^https?:\/\/app\.(bilibili|biliapi)\.(com|net)\/x\/v2\/account\/mine/.test($request.url):try{let m=JSON.parse(body),h=new Set([396,397,398,399,400,402,404,406,407,410,425,426,427,428,430,432,433,434,494,495,496,497,500,501]);m.data.sections_v2.forEach((t,i)=>{t.items.forEach(t=>{622===t.id&&(t.title="会员购",t.uri="bilibili://mall/home")});let e=t.items.filter(t=>h.has(t.id));m.data.sections_v2[i].items=e,m.data.sections_v2[i].button={},delete m.data.sections_v2[i].be_up_title,delete m.data.sections_v2[i].tip_icon,delete m.data.sections_v2[i].tip_title;for(let a=0;a<m.data.sections_v2.length;a++)("创作中心"==m.data.sections_v2[a].title||"創作中心"==m.data.sections_v2[a].title)&&(delete m.data.sections_v2[a].title,delete m.data.sections_v2[a].type);delete m.data.vip_section_v2,delete m.data.vip_section,m.data.hasOwnProperty("live_tip")&&(m.data.live_tip={}),m.data.hasOwnProperty("answer")&&(m.data.answer={}),m.data.vip_type=2,m.data.vip.type=2,m.data.vip.status=1,m.data.vip.vip_pay_type=1,m.data.vip.due_date=4669824160}),body=JSON.stringify(m)}catch(u){console.log("bilibili mypage:"+u)}break;
default:$done({})}$done({body})}else $done({});
